(()=>{var e={};e.id=285,e.ids=[285],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},9858:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),r(5113),r(6001),r(5866);var s=r(3191),n=r(8716),a=r(7922),i=r.n(a),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5113)),"/home/mcsmart/projects/active/expenses_made_easy/app/checkout/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,6001)),"/home/mcsmart/projects/active/expenses_made_easy/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/mcsmart/projects/active/expenses_made_easy/app/checkout/page.tsx"],u="/checkout/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7685:(e,t,r)=>{Promise.resolve().then(r.bind(r,3204))},6570:(e,t,r)=>{Promise.resolve().then(r.bind(r,649))},6109:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},3204:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var s,n=r(326),a=r(7577),i=r(5047),l="https://js.stripe.com/v3",o=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,c=function(){for(var e=document.querySelectorAll('script[src^="'.concat(l,'"]')),t=0;t<e.length;t++){var r=e[t];if(o.test(r.src))return r}return null},d=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(l).concat(t);var s=document.head||document.body;if(!s)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},u=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"2.4.0",startTime:t})},m=null,p=null,h=null,x=function(e,t,r){if(null===e)return null;var s=e.apply(void 0,t);return u(s,r),s},f=!1,g=function(){return s||(s=(null!==m?m:(m=new Promise(function(e,t){if("undefined"==typeof window||"undefined"==typeof document){e(null);return}if(window.Stripe,window.Stripe){e(window.Stripe);return}try{var r,s=c();s?s&&null!==h&&null!==p&&(s.removeEventListener("load",h),s.removeEventListener("error",p),null===(r=s.parentNode)||void 0===r||r.removeChild(s),s=d(null)):s=d(null),h=function(){window.Stripe?e(window.Stripe):t(Error("Stripe.js not available"))},p=function(){t(Error("Failed to load Stripe.js"))},s.addEventListener("load",h),s.addEventListener("error",p)}catch(e){t(e);return}})).catch(function(e){return m=null,Promise.reject(e)})).catch(function(e){return s=null,Promise.reject(e)}))};Promise.resolve().then(function(){return g()}).catch(function(e){f||console.warn(e)});var b=r(434);r(2321);let v=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];f=!0;var s=Date.now();return g().then(function(e){return x(e,t,s)})}(process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY);function y(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)(),r=t.get("plan")||"premium",s=t.get("interval")||"month",[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null),[u,m]=(0,a.useState)(!0),[p,h]=(0,a.useState)(""),x=async()=>{if(!c){e.push(`/auth/login?redirect=/checkout?plan=${r}&interval=${s}`);return}o(!0),h("");try{let e=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:r,interval:s,userId:c.id,email:c.email})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to create checkout session");let n=await v;await n.redirectToCheckout({sessionId:t.sessionId})}catch(e){console.error(e),h(e.message||"Something went wrong"),o(!1)}},f={premium:{name:"Premium",monthlyPrice:"$9.99",yearlyPrice:"$79.99",features:["Unlimited expenses","Budget tracking","Receipt attachments","Export CSV/PDF"]},pro:{name:"Pro",monthlyPrice:"$19.99",yearlyPrice:"$159.99",features:["Everything in Premium","Advanced reports","Family sharing","API access"]}},g=f[r]||f.premium,y="year"===s?g.yearlyPrice:g.monthlyPrice;return u?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Complete Purchase"}),(0,n.jsxs)("p",{className:"text-gray-600 mb-6",children:["Start your 14-day free trial of ",g.name," plan"]}),(0,n.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,n.jsxs)("span",{className:"font-semibold text-lg",children:[g.name," Plan"]}),(0,n.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:[y,(0,n.jsxs)("span",{className:"text-sm text-gray-600",children:["/",s]})]})]}),n.jsx("ul",{className:"space-y-2",children:g.features.map((e,t)=>(0,n.jsxs)("li",{className:"flex items-center text-sm text-gray-700",children:[n.jsx("svg",{className:"w-4 h-4 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e]},t))})]}),!c&&n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,n.jsxs)("p",{className:"text-sm text-yellow-800",children:["Please ",n.jsx(b.default,{href:`/auth/login?redirect=/checkout?plan=${r}&interval=${s}`,className:"font-semibold underline",children:"sign in"})," or"," ",n.jsx(b.default,{href:"/auth/signup",className:"font-semibold underline",children:"create an account"})," to continue."]})}),p&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:n.jsx("p",{className:"text-sm text-red-800",children:p})}),n.jsx("button",{onClick:x,disabled:l,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:l?"Processing...":c?"Start Free Trial":"Sign In to Continue"}),n.jsx("p",{className:"text-xs text-center text-gray-500 mt-4",children:"14-day free trial. Cancel anytime. No charges during trial."}),(0,n.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 flex justify-between",children:[n.jsx(b.default,{href:"/pricing",className:"text-sm text-gray-600 hover:text-gray-700",children:"← Back to Pricing"}),"month"===s&&n.jsx(b.default,{href:`/checkout?plan=${r}&interval=year`,className:"text-sm text-blue-600 hover:text-blue-700",children:"Save 33% with yearly →"})]})]})})}function j(){return n.jsx(a.Suspense,{fallback:n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}),children:n.jsx(y,{})})}},649:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var s=r(326),n=r(7577);function a(){let[e,t]=(0,n.useState)(!1),[r,a]=(0,n.useState)(null),[i,l]=(0,n.useState)(!1),[o,c]=(0,n.useState)(!1),d=async()=>{if(r){r.prompt();let{outcome:e}=await r.userChoice;"accepted"===e&&t(!1),a(null)}};return!e||o?null:(0,s.jsxs)("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-sm bg-gradient-to-r from-blue-600 to-blue-700 text-white p-5 rounded-xl shadow-2xl z-50 animate-slide-up",children:[s.jsx("button",{onClick:()=>{t(!1),localStorage.setItem("pwa-install-dismissed","true")},className:"absolute top-3 right-3 text-white/80 hover:text-white text-xl leading-none","aria-label":"Dismiss",children:"\xd7"}),(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:s.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-bold text-lg mb-1",children:"Install App"}),i?(0,s.jsxs)("div",{className:"text-sm text-blue-100",children:[s.jsx("p",{className:"mb-2",children:"Add to your home screen for quick access:"}),(0,s.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[(0,s.jsxs)("li",{children:["Tap the ",s.jsx("span",{className:"inline-flex items-center bg-white/20 px-1.5 py-0.5 rounded",children:s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 2L12 14M12 2L8 6M12 2L16 6M4 14L4 20C4 21.1 4.9 22 6 22L18 22C19.1 22 20 21.1 20 20L20 14",stroke:"currentColor",strokeWidth:"2",fill:"none"})})})," Share button"]}),(0,s.jsxs)("li",{children:["Scroll and tap ",s.jsx("strong",{children:'"Add to Home Screen"'})]}),(0,s.jsxs)("li",{children:["Tap ",s.jsx("strong",{children:'"Add"'})]})]})]}):(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-blue-100 mb-3",children:"Get quick access from your home screen!"}),r&&s.jsx("button",{onClick:d,className:"bg-white text-blue-600 px-5 py-2 rounded-lg font-semibold text-sm hover:bg-blue-50 transition shadow-lg",children:"Install Now"})]})]})]})]})}},5047:(e,t,r)=>{"use strict";var s=r(7389);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},2321:(e,t,r)=>{"use strict";r.d(t,{O:()=>s});let s=(0,r(1812).eI)("https://vckynnyputrvwjhosryl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZja3lubnlwdXRydndqaG9zcnlsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk4NDQ5OTgsImV4cCI6MjA3NTQyMDk5OH0.wpopXA3AtRSKAJdGqtcEtbBJPcpCGfeqm6VC27JkNEI",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:void 0,storageKey:"expenses-made-easy-auth"}})},5113:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});var s=r(8570);let n=(0,s.createProxy)(String.raw`/home/mcsmart/projects/active/expenses_made_easy/app/checkout/page.tsx`),{__esModule:a,$$typeof:i}=n;n.default;let l=(0,s.createProxy)(String.raw`/home/mcsmart/projects/active/expenses_made_easy/app/checkout/page.tsx#default`)},6001:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u,metadata:()=>c,viewport:()=>d});var s=r(9510);r(7272);var n=r(8570);let a=(0,n.createProxy)(String.raw`/home/mcsmart/projects/active/expenses_made_easy/components/InstallPrompt.tsx`),{__esModule:i,$$typeof:l}=a;a.default;let o=(0,n.createProxy)(String.raw`/home/mcsmart/projects/active/expenses_made_easy/components/InstallPrompt.tsx#default`),c={title:"Expenses Made Easy",description:"Track business expenses with AI receipt scanning and tax reports",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:"Expenses"},formatDetection:{telephone:!1},openGraph:{type:"website",siteName:"Expenses Made Easy",title:"Expenses Made Easy",description:"Track business expenses with AI receipt scanning and tax reports"}},d={themeColor:"#3B82F6",width:"device-width",initialScale:1,maximumScale:1,userScalable:!1};function u({children:e}){return(0,s.jsxs)("html",{lang:"en",children:[(0,s.jsxs)("head",{children:[s.jsx("link",{rel:"apple-touch-icon",href:"/icons/icon.svg"}),s.jsx("link",{rel:"icon",type:"image/svg+xml",href:"/icons/icon.svg"}),s.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),s.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),s.jsx("meta",{name:"apple-mobile-web-app-title",content:"Expenses"}),s.jsx("meta",{name:"mobile-web-app-capable",content:"yes"})]}),(0,s.jsxs)("body",{children:[e,s.jsx(o,{}),s.jsx("script",{dangerouslySetInnerHTML:{__html:`
              if ('serviceWorker' in navigator) {
                window.addEventListener('load', function() {
                  navigator.serviceWorker.register('/sw.js').then(
                    function(registration) {
                      console.log('ServiceWorker registration successful');
                    },
                    function(err) {
                      console.log('ServiceWorker registration failed: ', err);
                    }
                  );
                });
              }
            `}})]})]})}},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,471,434,812],()=>r(9858));module.exports=s})();