"use strict";(()=>{var e={};e.id=961,e.ids=[961],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},9268:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>j,patchFetch:()=>E,requestAsyncStorage:()=>y,routeModule:()=>h,serverHooks:()=>f,staticGenerationAsyncStorage:()=>R});var t={};r.r(t),r.d(t,{DELETE:()=>m,GET:()=>l,POST:()=>g,PUT:()=>x});var o=r(9303),a=r(8716),n=r(670),i=r(7070),u=r(1657);let c="https://vckynnyputrvwjhosryl.supabase.co",p=process.env.SUPABASE_SERVICE_ROLE_KEY;c&&p||console.warn("Supabase admin client is missing env vars. Check NEXT_PUBLIC_SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY.");let d=(0,u.eI)(c,p);async function l(){try{let{data:e,error:s}=await d.from("categories").select("*").order("name");if(s)throw s;return i.NextResponse.json({success:!0,data:e})}catch(e){return i.NextResponse.json({success:!1,error:e.message},{status:500})}}async function g(e){try{let{categories:s,user_id:r}=await e.json();if(!s||!Array.isArray(s)||0===s.length)return i.NextResponse.json({success:!1,error:"Categories array is required"},{status:400});let t=s.map(e=>{let{user_id:s,...t}=e,o=s||r;return o?{...t,user_id:o}:t}),{data:o,error:a}=await d.from("categories").insert(t).select();if(a)throw a;return i.NextResponse.json({success:!0,data:o})}catch(e){return i.NextResponse.json({success:!1,error:e.message},{status:500})}}async function m(e){try{let{searchParams:s}=new URL(e.url),r=s.get("id");if(!r)return i.NextResponse.json({success:!1,error:"Category ID is required"},{status:400});let{error:t}=await d.from("categories").delete().eq("id",r);if(t)throw t;return i.NextResponse.json({success:!0})}catch(e){return i.NextResponse.json({success:!1,error:e.message},{status:500})}}async function x(e){try{let{id:s,...r}=await e.json();if(!s)return i.NextResponse.json({success:!1,error:"Category ID is required"},{status:400});let{data:t,error:o}=await d.from("categories").update(r).eq("id",s).select().single();if(o)throw o;return i.NextResponse.json({success:!0,data:t})}catch(e){return i.NextResponse.json({success:!1,error:e.message},{status:500})}}let h=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/categories/route",pathname:"/api/categories",filename:"route",bundlePath:"app/api/categories/route"},resolvedPagePath:"/home/mcsmart/projects/active/expenses_made_easy/app/api/categories/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:y,staticGenerationAsyncStorage:R,serverHooks:f}=h,j="/api/categories/route";function E(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:R})}}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[948,972,657],()=>r(9268));module.exports=t})();