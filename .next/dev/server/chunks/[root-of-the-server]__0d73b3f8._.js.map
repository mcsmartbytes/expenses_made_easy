{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///home/mcsmart/projects/active/expenses_made_easy/utils/supabaseAdmin.ts"],"sourcesContent":["import { createClient as createSupabaseClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst serviceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY!;\n\nif (!supabaseUrl || !serviceRoleKey) {\n  // eslint-disable-next-line no-console\n  console.warn('Supabase admin client is missing env vars. Check NEXT_PUBLIC_SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY.');\n}\n\nexport const supabaseAdmin = createSupabaseClient(supabaseUrl, serviceRoleKey);\n\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM,iBAAiB,QAAQ,GAAG,CAAC,yBAAyB;AAE5D,IAAI,CAAC,eAAe,CAAC,gBAAgB;IACnC,sCAAsC;IACtC,QAAQ,IAAI,CAAC;AACf;AAEO,MAAM,gBAAgB,IAAA,yMAAoB,EAAC,aAAa"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///home/mcsmart/projects/active/expenses_made_easy/app/api/categories/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { supabaseAdmin } from '@/utils/supabaseAdmin';\n\n// GET - fetch all categories\nexport async function GET() {\n  try {\n    const { data, error } = await supabaseAdmin\n      .from('categories')\n      .select('*')\n      .order('name');\n\n    if (error) throw error;\n\n    return NextResponse.json({ success: true, data });\n  } catch (error: any) {\n    return NextResponse.json(\n      { success: false, error: error.message },\n      { status: 500 }\n    );\n  }\n}\n\n// POST - create one or more categories\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n    const { categories, user_id } = body;\n\n    if (!categories || !Array.isArray(categories) || categories.length === 0) {\n      return NextResponse.json(\n        { success: false, error: 'Categories array is required' },\n        { status: 400 }\n      );\n    }\n\n    // Only include user_id if provided (for authenticated users)\n    // Otherwise, omit it to allow NULL (requires DB column to be nullable)\n    const categoriesToInsert = categories.map((cat: any) => {\n      const { user_id: catUserId, ...rest } = cat;\n      const finalUserId = catUserId || user_id;\n      if (finalUserId) {\n        return { ...rest, user_id: finalUserId };\n      }\n      return rest; // No user_id - will be NULL if column allows\n    });\n\n    const { data, error } = await supabaseAdmin\n      .from('categories')\n      .insert(categoriesToInsert)\n      .select();\n\n    if (error) throw error;\n\n    return NextResponse.json({ success: true, data });\n  } catch (error: any) {\n    return NextResponse.json(\n      { success: false, error: error.message },\n      { status: 500 }\n    );\n  }\n}\n\n// DELETE - delete a category by ID\nexport async function DELETE(request: NextRequest) {\n  try {\n    const { searchParams } = new URL(request.url);\n    const id = searchParams.get('id');\n\n    if (!id) {\n      return NextResponse.json(\n        { success: false, error: 'Category ID is required' },\n        { status: 400 }\n      );\n    }\n\n    const { error } = await supabaseAdmin\n      .from('categories')\n      .delete()\n      .eq('id', id);\n\n    if (error) throw error;\n\n    return NextResponse.json({ success: true });\n  } catch (error: any) {\n    return NextResponse.json(\n      { success: false, error: error.message },\n      { status: 500 }\n    );\n  }\n}\n\n// PUT - update a category\nexport async function PUT(request: NextRequest) {\n  try {\n    const body = await request.json();\n    const { id, ...updates } = body;\n\n    if (!id) {\n      return NextResponse.json(\n        { success: false, error: 'Category ID is required' },\n        { status: 400 }\n      );\n    }\n\n    const { data, error } = await supabaseAdmin\n      .from('categories')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    return NextResponse.json({ success: true, data });\n  } catch (error: any) {\n    return NextResponse.json(\n      { success: false, error: error.message },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":"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"}}]
}