(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[326],{5333:function(e,s,t){Promise.resolve().then(t.bind(t,9631))},9631:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var l=t(7437),a=t(6079),n=t(2265),r=t(7138),i=t(2094);function d(){let[e,s]=(0,n.useState)({totalThisMonth:0,totalLastMonth:0,businessExpenses:0,personalExpenses:0,totalDeductible:0,fullyDeductible:0,partiallyDeductible:0}),[t,d]=(0,n.useState)([]),[o,c]=(0,n.useState)(!0);async function x(){try{console.log("\uD83D\uDCCA Loading dashboard...");let{data:{session:e}}=await i.O.auth.getSession();console.log("\uD83D\uDD11 Session check:",e?"✅ Found":"❌ Not found");let{data:{user:t}}=await i.O.auth.getUser();if(console.log("\uD83D\uDC64 User check:",t?"✅ ".concat(t.email):"❌ Not found"),!t){console.log("⚠️ No user found, but continuing anyway (auth disabled for dev)"),c(!1);return}console.log("✅ User authenticated, loading data...");let l=new Date,a=new Date(l.getFullYear(),l.getMonth(),1),n=new Date(l.getFullYear(),l.getMonth()-1,1),r=new Date(l.getFullYear(),l.getMonth(),0),{data:o,error:x}=await i.O.from("expenses").select("amount, is_business, categories(deduction_percentage, is_tax_deductible)").eq("user_id",t.id).gte("date",a.toISOString().split("T")[0]);x&&(o=(await i.O.from("expenses").select("amount, is_business, categories(is_tax_deductible)").eq("user_id",t.id).gte("date",a.toISOString().split("T")[0])).data);let{data:u}=await i.O.from("expenses").select("amount").eq("user_id",t.id).gte("date",n.toISOString().split("T")[0]).lte("date",r.toISOString().split("T")[0]),{data:m}=await i.O.from("expenses").select("id, amount, description, date, vendor, is_business, categories(name, icon, color)").eq("user_id",t.id).order("date",{ascending:!1}).limit(5),h=(null==o?void 0:o.reduce((e,s)=>e+Number(s.amount),0))||0,g=(null==u?void 0:u.reduce((e,s)=>e+Number(s.amount),0))||0,b=(null==o?void 0:o.filter(e=>e.is_business).reduce((e,s)=>e+Number(s.amount),0))||0,p=(null==o?void 0:o.filter(e=>!e.is_business).reduce((e,s)=>e+Number(s.amount),0))||0,f=0,j=0,N=0;null==o||o.forEach(e=>{var s,t,l;let a=Number(e.amount),n="number"==typeof(null===(s=e.categories)||void 0===s?void 0:s.deduction_percentage)?null===(t=e.categories)||void 0===t?void 0:t.deduction_percentage:(null===(l=e.categories)||void 0===l?void 0:l.is_tax_deductible)?100:0,r=a*n/100;f+=r,100===n?j+=r:n>0&&n<100&&(N+=r)}),s({totalThisMonth:h,totalLastMonth:g,businessExpenses:b,personalExpenses:p,totalDeductible:f,fullyDeductible:j,partiallyDeductible:N});let y=(null==m?void 0:m.map(e=>({...e,category:e.categories||null})))||[];d(y)}catch(e){console.error("Error loading dashboard:",e)}finally{c(!1)}}async function u(e){if(!confirm("Are you sure you want to delete this expense?"))return;let{error:s}=await i.O.from("expenses").delete().eq("id",e);s||x()}if((0,n.useEffect)(()=>{x()},[]),o)return(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})]})});let m=e.totalLastMonth>0?(e.totalThisMonth-e.totalLastMonth)/e.totalLastMonth*100:0;return(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-blue-50",children:[(0,l.jsx)(a.Z,{}),(0,l.jsx)("header",{className:"bg-white shadow-md border-b-2 border-blue-600",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Welcome back! Here's your expense overview"})]}),(0,l.jsx)("div",{className:"flex gap-3",children:(0,l.jsxs)(r.default,{href:"/expenses/new",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-semibold shadow-sm flex items-center gap-2",children:[(0,l.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Expense"]})})]})})}),(0,l.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl shadow-lg p-6 text-white",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-blue-100",children:"This Month"}),(0,l.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB0"})})]}),(0,l.jsxs)("p",{className:"text-4xl font-bold mb-2",children:["$",e.totalThisMonth.toFixed(2)]}),0!==m&&(0,l.jsxs)("div",{className:"inline-flex items-center gap-1 text-sm font-medium px-2 py-1 rounded-full ".concat(m>0?"bg-red-500/20 text-red-100":"bg-green-500/20 text-green-100"),children:[m>0?"↑":"↓"," ",Math.abs(m).toFixed(1),"% vs last month"]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-gray-200",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-gray-600",children:"Last Month"}),(0,l.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCC5"})})]}),(0,l.jsxs)("p",{className:"text-4xl font-bold text-gray-900",children:["$",e.totalLastMonth.toFixed(2)]}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Previous period"})]}),(0,l.jsxs)("div",{className:"bg-gradient-to-br from-green-600 to-green-700 rounded-xl shadow-lg p-6 text-white",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-green-100",children:"Business"}),(0,l.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCBC"})})]}),(0,l.jsxs)("p",{className:"text-4xl font-bold mb-2",children:["$",e.businessExpenses.toFixed(2)]}),(0,l.jsx)("p",{className:"text-sm text-green-100",children:"Tax deductible expenses"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-gray-200",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-gray-600",children:"Personal"}),(0,l.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFE0"})})]}),(0,l.jsxs)("p",{className:"text-4xl font-bold text-gray-900",children:["$",e.personalExpenses.toFixed(2)]}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Non-deductible"})]})]}),(0,l.jsxs)("div",{className:"bg-gradient-to-br from-purple-600 to-purple-800 rounded-xl shadow-lg p-6 mb-8 text-white",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:(0,l.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold",children:"Tax Deduction Summary"}),(0,l.jsx)("p",{className:"text-purple-100 text-sm",children:"IRS-compliant expense deductions for this month"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[(0,l.jsx)("p",{className:"text-purple-100 text-sm font-medium mb-1",children:"Total Deductible"}),(0,l.jsxs)("p",{className:"text-3xl font-bold",children:["$",e.totalDeductible.toFixed(2)]}),(0,l.jsx)("p",{className:"text-purple-100 text-xs mt-2",children:e.totalThisMonth>0?"".concat((e.totalDeductible/e.totalThisMonth*100).toFixed(0),"% of total expenses"):"No expenses yet"})]}),(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[(0,l.jsx)("p",{className:"text-purple-100 text-sm font-medium mb-1",children:"100% Deductible"}),(0,l.jsxs)("p",{className:"text-3xl font-bold",children:["$",e.fullyDeductible.toFixed(2)]}),(0,l.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,l.jsx)("span",{className:"px-2 py-0.5 bg-green-500/30 text-green-100 text-xs rounded-full font-medium",children:"Fully Deductible"})})]}),(0,l.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[(0,l.jsx)("p",{className:"text-purple-100 text-sm font-medium mb-1",children:"Partial Deductions"}),(0,l.jsxs)("p",{className:"text-3xl font-bold",children:["$",e.partiallyDeductible.toFixed(2)]}),(0,l.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,l.jsx)("span",{className:"px-2 py-0.5 bg-yellow-500/30 text-yellow-100 text-xs rounded-full font-medium",children:"50% & Other"})})]})]}),(0,l.jsx)("div",{className:"mt-4 bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:(0,l.jsxs)("div",{className:"flex items-start gap-2",children:[(0,l.jsx)("svg",{className:"w-5 h-5 text-purple-200 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,l.jsxs)("p",{className:"text-purple-100 text-sm",children:[(0,l.jsx)("strong",{children:"Tax Savings Estimate:"})," Based on a 24% tax bracket, your deductible expenses could save you approximately ",(0,l.jsxs)("strong",{className:"text-white",children:["$",(.24*e.totalDeductible).toFixed(2)]})," in taxes this month."]})]})})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border-2 border-gray-200",children:[(0,l.jsxs)("div",{className:"px-6 py-5 border-b-2 border-gray-200 flex justify-between items-center bg-gradient-to-r from-gray-50 to-white",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Recent Expenses"}),(0,l.jsxs)(r.default,{href:"/expenses",className:"text-sm text-blue-600 hover:text-blue-700 font-semibold flex items-center gap-1",children:["View All",(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,l.jsx)("div",{className:"divide-y divide-gray-200",children:0===t.length?(0,l.jsxs)("div",{className:"p-8 text-center",children:[(0,l.jsx)("p",{className:"text-gray-500 mb-4",children:"No expenses yet"}),(0,l.jsx)(r.default,{href:"/expenses/new",className:"inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-semibold",children:"Add Your First Expense"})]}):t.map(e=>(0,l.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[e.category&&(0,l.jsx)("span",{className:"text-2xl",children:e.category.icon}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:e.description}),e.is_business&&(0,l.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded-full font-medium",children:"Business"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[(0,l.jsx)("span",{children:new Date(e.date).toLocaleDateString()}),e.vendor&&(0,l.jsxs)("span",{children:["• ",e.vendor]}),e.category&&(0,l.jsxs)("span",{children:["• ",e.category.name]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["$",e.amount.toFixed(2)]}),(0,l.jsx)("button",{onClick:()=>u(e.id),className:"text-red-600 hover:text-red-700 text-sm",children:"Delete"})]})]})},e.id))})]})]})]})}},6079:function(e,s,t){"use strict";t.d(s,{Z:function(){return d}});var l=t(7437),a=t(2265),n=t(7138),r=t(6463),i=t(2094);function d(){let e=(0,r.usePathname)(),s=(0,r.useRouter)(),[t,d]=(0,a.useState)(null),[o,c]=(0,a.useState)(!1),[x,u]=(0,a.useState)(!1);async function m(){let{data:{user:e}}=await i.O.auth.getUser();d(e)}async function h(){c(!0);try{await i.O.auth.signOut(),d(null),u(!1),s.push("/")}catch(e){console.error("Error signing out:",e)}finally{c(!1)}}(0,a.useEffect)(()=>{m()},[]),(0,a.useEffect)(()=>{u(!1)},[e]);let g=[{href:"/expense-dashboard",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/expenses",label:"Expenses",icon:"\uD83D\uDCCB"},{href:"/budgets",label:"Budgets",icon:"\uD83D\uDCB0"},{href:"/receipts",label:"Receipts",icon:"\uD83E\uDDFE"},{href:"/mileage",label:"Mileage",icon:"\uD83D\uDE97"},{href:"/reports",label:"Reports",icon:"\uD83D\uDCC8"},{href:"/profile",label:"Profile",icon:"\uD83D\uDC64"}];return(0,l.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,l.jsxs)(n.default,{href:"/expense-dashboard",className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB0"}),(0,l.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"Expenses Made Easy"})]}),(0,l.jsxs)("div",{className:"hidden md:flex items-center gap-1",children:[g.map(s=>(0,l.jsxs)(n.default,{href:s.href,className:"px-4 py-2 rounded-lg text-sm font-medium transition ".concat(e===s.href?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:[(0,l.jsx)("span",{className:"mr-1",children:s.icon}),s.label]},s.href)),t?(0,l.jsxs)("button",{onClick:h,disabled:o,className:"ml-2 px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 transition disabled:opacity-50",children:[(0,l.jsx)("span",{className:"mr-1",children:"\uD83D\uDEAA"}),o?"Logging out...":"Logout"]}):(0,l.jsxs)(n.default,{href:"/auth/login",className:"ml-2 px-4 py-2 rounded-lg text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 transition",children:[(0,l.jsx)("span",{className:"mr-1",children:"\uD83D\uDD10"}),"Login"]})]}),(0,l.jsx)("div",{className:"md:hidden",children:(0,l.jsx)("button",{onClick:()=>u(!x),className:"p-2 rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Toggle menu",children:x?"✕":"☰"})})]}),x&&(0,l.jsx)("div",{className:"md:hidden py-4 border-t",children:(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[g.map(s=>(0,l.jsxs)(n.default,{href:s.href,className:"px-4 py-3 rounded-lg text-sm font-medium transition ".concat(e===s.href?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:[(0,l.jsx)("span",{className:"mr-2",children:s.icon}),s.label]},s.href)),(0,l.jsx)("div",{className:"border-t my-2 pt-2",children:t?(0,l.jsxs)("button",{onClick:h,disabled:o,className:"w-full px-4 py-3 rounded-lg text-sm font-medium text-left text-gray-700 hover:bg-gray-100 transition disabled:opacity-50",children:[(0,l.jsx)("span",{className:"mr-2",children:"\uD83D\uDEAA"}),o?"Logging out...":"Logout"]}):(0,l.jsxs)(n.default,{href:"/auth/login",className:"block px-4 py-3 rounded-lg text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 transition text-center",children:[(0,l.jsx)("span",{className:"mr-2",children:"\uD83D\uDD10"}),"Login"]})})]})})]})})}},6463:function(e,s,t){"use strict";var l=t(1169);t.o(l,"usePathname")&&t.d(s,{usePathname:function(){return l.usePathname}}),t.o(l,"useRouter")&&t.d(s,{useRouter:function(){return l.useRouter}}),t.o(l,"useSearchParams")&&t.d(s,{useSearchParams:function(){return l.useSearchParams}})},2094:function(e,s,t){"use strict";t.d(s,{O:function(){return l}});let l=(0,t(2835).eI)("https://vckynnyputrvwjhosryl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZja3lubnlwdXRydndqaG9zcnlsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk4NDQ5OTgsImV4cCI6MjA3NTQyMDk5OH0.wpopXA3AtRSKAJdGqtcEtbBJPcpCGfeqm6VC27JkNEI",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"expenses-made-easy-auth"}})}},function(e){e.O(0,[138,835,971,23,744],function(){return e(e.s=5333)}),_N_E=e.O()}]);