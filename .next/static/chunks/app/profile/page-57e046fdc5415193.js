(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{834:function(e,t,a){Promise.resolve().then(a.bind(a,397))},397:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=a(7437),l=a(2265),i=a(7138),n=a(2094);let r={real_estate:[{name:"MLS Fees",icon:"\uD83C\uDFE1",color:"#8B5CF6",is_tax_deductible:!0},{name:"Staging",icon:"\uD83D\uDECB️",color:"#F59E0B",is_tax_deductible:!0},{name:"Property Showings",icon:"\uD83C\uDFE0",color:"#3B82F6",is_tax_deductible:!0},{name:"Client Gifts",icon:"\uD83C\uDF81",color:"#EC4899",is_tax_deductible:!0},{name:"Open House Snacks",icon:"\uD83C\uDF6A",color:"#F97316",is_tax_deductible:!0}],construction:[{name:"Materials",icon:"\uD83E\uDDF1",color:"#F59E0B",is_tax_deductible:!0},{name:"Equipment Rental",icon:"\uD83C\uDFD7️",color:"#10B981",is_tax_deductible:!0},{name:"Permits",icon:"\uD83D\uDCC4",color:"#6366F1",is_tax_deductible:!0}],healthcare:[{name:"Medical Supplies",icon:"\uD83E\uDDEA",color:"#10B981",is_tax_deductible:!0},{name:"Continuing Education",icon:"\uD83C\uDF93",color:"#8B5CF6",is_tax_deductible:!0}],consulting:[{name:"Software Subscriptions",icon:"\uD83D\uDCBB",color:"#3B82F6",is_tax_deductible:!0},{name:"Client Meals",icon:"\uD83C\uDF7D️",color:"#EF4444",is_tax_deductible:!0}],retail:[{name:"Inventory",icon:"\uD83D\uDCE6",color:"#F59E0B",is_tax_deductible:!0},{name:"Packaging",icon:"\uD83D\uDCE6",color:"#64748B",is_tax_deductible:!0}],restaurant:[{name:"Food Supplies",icon:"\uD83E\uDD66",color:"#10B981",is_tax_deductible:!0},{name:"Kitchen Equipment",icon:"\uD83C\uDF73",color:"#F97316",is_tax_deductible:!0}],technology:[{name:"Cloud Services",icon:"☁️",color:"#3B82F6",is_tax_deductible:!0},{name:"Devices",icon:"\uD83D\uDCF1",color:"#8B5CF6",is_tax_deductible:!0}],transportation:[{name:"Vehicle Maintenance",icon:"\uD83D\uDEE0️",color:"#10B981",is_tax_deductible:!0},{name:"Fuel",icon:"⛽",color:"#F59E0B",is_tax_deductible:!0}],creative:[{name:"Studio Rental",icon:"\uD83C\uDFE2",color:"#6366F1",is_tax_deductible:!0},{name:"Props & Materials",icon:"\uD83C\uDFA8",color:"#F97316",is_tax_deductible:!0}],legal:[{name:"Bar Dues",icon:"⚖️",color:"#8B5CF6",is_tax_deductible:!0},{name:"Research Tools",icon:"\uD83D\uDCDA",color:"#64748B",is_tax_deductible:!0}],accounting:[{name:"Software",icon:"\uD83E\uDDEE",color:"#3B82F6",is_tax_deductible:!0},{name:"Professional Development",icon:"\uD83C\uDF93",color:"#8B5CF6",is_tax_deductible:!0}],fitness:[{name:"Equipment",icon:"\uD83C\uDFCB️",color:"#10B981",is_tax_deductible:!0},{name:"Supplements",icon:"\uD83D\uDC8A",color:"#F59E0B",is_tax_deductible:!0}],photography:[{name:"Camera Gear",icon:"\uD83D\uDCF7",color:"#3B82F6",is_tax_deductible:!0},{name:"Editing Software",icon:"\uD83D\uDDA5️",color:"#8B5CF6",is_tax_deductible:!0}],other:[]},o=[{key:"real_estate",label:"Real Estate"},{key:"construction",label:"Construction"},{key:"healthcare",label:"Healthcare"},{key:"consulting",label:"Consulting"},{key:"retail",label:"Retail"},{key:"restaurant",label:"Restaurant / Food Service"},{key:"technology",label:"Technology"},{key:"transportation",label:"Transportation / Logistics"},{key:"creative",label:"Creative / Design"},{key:"legal",label:"Legal"},{key:"accounting",label:"Accounting / Finance"},{key:"fitness",label:"Fitness / Wellness"},{key:"photography",label:"Photography / Videography"},{key:"other",label:"Other"}];function c(){var e,t,a;let[c,d]=(0,l.useState)(null),[u,x]=(0,l.useState)([]),[m,b]=(0,l.useState)(!0),[g,h]=(0,l.useState)(null),[p,y]=(0,l.useState)(!1),[D,f]=(0,l.useState)(""),[v,j]=(0,l.useState)(""),[C,_]=(0,l.useState)(!1),[N,w]=(0,l.useState)(!1),[F,E]=(0,l.useState)(null),[k,B]=(0,l.useState)({name:"",icon:"\uD83D\uDCB0",color:"#3B82F6",is_tax_deductible:!0});async function S(){let{data:{user:e}}=await n.O.auth.getUser();if(e){d({email:e.email||"",created_at:e.created_at});let{data:t}=await n.O.from("user_profiles").select("industry, business_name").eq("user_id",e.id).single();t&&(f(t.industry||""),j(t.business_name||""))}b(!1)}async function I(){try{let e=await fetch("/api/categories"),t=await e.json();t.success&&t.data&&x(t.data)}catch(e){console.error("Error loading categories:",e)}}async function O(){_(!0),E(null);try{let{data:{user:e}}=await n.O.auth.getUser(),t=(null==e?void 0:e.id)||"00000000-0000-0000-0000-000000000000",{data:a}=await n.O.from("user_profiles").select("id").eq("user_id",t).single();if(a){let{error:e}=await n.O.from("user_profiles").update({industry:D,business_name:v}).eq("user_id",t);if(e)throw e}else{let{error:e}=await n.O.from("user_profiles").insert({user_id:t,industry:D,business_name:v});if(e)throw e}E({type:"success",text:"Profile saved successfully!"})}catch(e){E({type:"error",text:e.message||"Failed to save profile"})}finally{_(!1)}}async function A(){if(D){w(!0),E(null);try{let e=r[D];if(!e||0===e.length){E({type:"error",text:"No predefined categories for this industry"});return}let t=await fetch("/api/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({categories:e})}),a=await t.json();if(!a.success)throw Error(a.error);await I(),E({type:"success",text:"Added ".concat(e.length," industry-specific categories!")})}catch(e){E({type:"error",text:e.message||"Failed to create categories"})}finally{w(!1)}}}async function P(e){e.preventDefault(),E(null);try{let e=await fetch("/api/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({categories:[k]})}),t=await e.json();if(!t.success)throw Error(t.error);y(!1),B({name:"",icon:"\uD83D\uDCB0",color:"#3B82F6",is_tax_deductible:!0}),I(),E({type:"success",text:"Category added!"})}catch(e){E({type:"error",text:e.message||"Failed to add category"})}}async function T(e){try{let t=await fetch("/api/categories",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,name:e.name,icon:e.icon,color:e.color,is_tax_deductible:e.is_tax_deductible})});(await t.json()).success&&(h(null),I())}catch(e){console.error("Error updating category:",e)}}async function J(e){if(confirm("Delete this category? Expenses using it will not be deleted."))try{let t=await fetch("/api/categories?id=".concat(e),{method:"DELETE"});(await t.json()).success&&I()}catch(e){console.error("Error deleting category:",e)}}return((0,l.useEffect)(()=>{S(),I()},[]),m)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading profile..."})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile & Settings"}),(0,s.jsx)(i.default,{href:"/expense-dashboard",className:"text-blue-600 hover:text-blue-700",children:"← Back to Dashboard"})]})})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8 space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Account Information"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),(0,s.jsx)("p",{className:"text-gray-900",children:null==c?void 0:c.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Member Since"}),(0,s.jsx)("p",{className:"text-gray-900",children:(null==c?void 0:c.created_at)?new Date(c.created_at).toLocaleDateString():"N/A"})]})]})]}),F&&(0,s.jsx)("div",{className:"p-4 rounded-lg ".concat("success"===F.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"),children:F.text}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Business Profile"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Select your industry to get relevant expense categories pre-loaded."}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),(0,s.jsx)("input",{type:"text",value:v,onChange:e=>j(e.target.value),placeholder:"Your business name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Industry"}),(0,s.jsxs)("select",{value:D,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"Select your industry..."}),o.map(e=>(0,s.jsx)("option",{value:e.key,children:e.label},e.key))]})]}),D&&(null===(e=r[D])||void 0===e?void 0:e.length)>0&&(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"font-medium text-blue-900 mb-2",children:["Available categories for ",null===(t=o.find(e=>e.key===D))||void 0===t?void 0:t.label,":"]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:r[D].map((e,t)=>(0,s.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm",style:{backgroundColor:e.color+"20",color:e.color},children:[e.icon," ",e.name]},t))})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,s.jsx)("button",{onClick:O,disabled:C,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-semibold disabled:opacity-50",children:C?"Saving...":"Save Profile"}),D&&(null===(a=r[D])||void 0===a?void 0:a.length)>0&&(0,s.jsx)("button",{onClick:A,disabled:N,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-semibold disabled:opacity-50",children:N?"Creating...":"Add ".concat(r[D].length," Industry Categories")})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Expense Categories"}),(0,s.jsx)("button",{onClick:()=>y(!p),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-semibold",children:p?"Cancel":"+ Add Category"})]}),p&&(0,s.jsxs)("form",{onSubmit:P,className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,s.jsx)("h3",{className:"font-semibold mb-3",children:"Create New Category"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Category Name *"}),(0,s.jsx)("input",{type:"text",required:!0,value:k.name,onChange:e=>B({...k,name:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Groceries"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Icon"}),(0,s.jsx)("div",{className:"flex gap-2 flex-wrap",children:["\uD83D\uDCB0","\uD83C\uDF7D️","✈️","\uD83D\uDE97","\uD83C\uDFE0","\uD83D\uDCA1","\uD83D\uDCCE","\uD83D\uDC54","\uD83D\uDEE1️","\uD83D\uDCE2","\uD83C\uDF89","\uD83C\uDFAF","\uD83D\uDCF1","\uD83D\uDCBB","\uD83C\uDFE5","\uD83C\uDF93"].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>B({...k,icon:e}),className:"w-10 h-10 text-xl rounded-lg border-2 transition ".concat(k.icon===e?"border-blue-600 bg-blue-50":"border-gray-300 hover:border-blue-400"),children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Color"}),(0,s.jsx)("div",{className:"flex gap-2 flex-wrap",children:[{name:"Blue",value:"#3B82F6"},{name:"Red",value:"#EF4444"},{name:"Green",value:"#10B981"},{name:"Purple",value:"#8B5CF6"},{name:"Orange",value:"#F97316"},{name:"Pink",value:"#EC4899"},{name:"Yellow",value:"#F59E0B"},{name:"Teal",value:"#14B8A6"}].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>B({...k,color:e.value}),className:"w-10 h-10 rounded-lg border-2 transition ".concat(k.color===e.value?"border-gray-900 ring-2 ring-gray-400":"border-gray-300"),style:{backgroundColor:e.value},title:e.name},e.value))})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"flex items-center gap-2 mt-6",children:[(0,s.jsx)("input",{type:"checkbox",checked:k.is_tax_deductible,onChange:e=>B({...k,is_tax_deductible:e.target.checked}),className:"w-5 h-5 text-blue-600 rounded"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Tax Deductible"})]})})]}),(0,s.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-semibold",children:"Add Category"}),(0,s.jsx)("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:u.map(e=>(0,s.jsx)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition",children:(null==g?void 0:g.id)===e.id?(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,s.jsx)("input",{type:"text",value:g.name,onChange:e=>h({...g,name:e.target.value}),className:"px-3 py-2 border rounded-lg"}),(0,s.jsx)("input",{type:"text",value:g.icon,onChange:e=>h({...g,icon:e.target.value}),className:"px-3 py-2 border rounded-lg text-center",maxLength:2}),(0,s.jsx)("input",{type:"color",value:g.color,onChange:e=>h({...g,color:e.target.value}),className:"h-10 w-20 border rounded-lg"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>T(g),className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:"Save"}),(0,s.jsx)("button",{onClick:()=>h(null),className:"px-3 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 text-sm",children:"Cancel"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-2xl",style:{backgroundColor:e.color+"20"},children:e.icon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.name}),(0,s.jsxs)("div",{className:"flex gap-2 text-xs text-gray-500",children:[(0,s.jsx)("span",{style:{color:e.color},children:"●"}),e.is_tax_deductible&&(0,s.jsx)("span",{className:"text-green-600",children:"Tax Deductible"})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>h(e),className:"px-3 py-1 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>J(e.id),className:"px-3 py-1 text-sm text-red-600 hover:bg-red-50 rounded-lg transition",children:"Delete"})]})]})},e.id))})]})]})]})}},2094:function(e,t,a){"use strict";a.d(t,{O:function(){return s}});let s=(0,a(2835).eI)("https://vckynnyputrvwjhosryl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZja3lubnlwdXRydndqaG9zcnlsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk4NDQ5OTgsImV4cCI6MjA3NTQyMDk5OH0.wpopXA3AtRSKAJdGqtcEtbBJPcpCGfeqm6VC27JkNEI",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"expenses-made-easy-auth"}})}},function(e){e.O(0,[138,835,971,23,744],function(){return e(e.s=834)}),_N_E=e.O()}]);