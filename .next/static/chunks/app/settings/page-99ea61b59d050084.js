(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{6524:function(e,s,t){Promise.resolve().then(t.bind(t,8972))},8972:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var a=t(7437),r=t(2265),l=t(7138),n=t(6079),i=t(2094);function c(){let[e,s]=(0,r.useState)(!0),[t,c]=(0,r.useState)(!1),[d,o]=(0,r.useState)(""),[u,m]=(0,r.useState)(5),[x,h]=(0,r.useState)("light"),[p,g]=(0,r.useState)("#3B82F6");async function f(){try{var e,t,a;let{data:{user:s}}=await i.O.auth.getUser();if(!s)return;let{data:r}=await i.O.from("user_profiles").select("preferences").eq("user_id",s.id).single();(null==r?void 0:null===(e=r.preferences)||void 0===e?void 0:e.mileage_auto_start_speed)&&m(r.preferences.mileage_auto_start_speed),(null==r?void 0:null===(t=r.preferences)||void 0===t?void 0:t.theme)&&h(r.preferences.theme),(null==r?void 0:null===(a=r.preferences)||void 0===a?void 0:a.primary_color)&&g(r.preferences.primary_color)}catch(e){console.error("Error loading settings:",e)}finally{s(!1)}}async function b(){c(!0),o("");try{let{data:{user:e}}=await i.O.auth.getUser();if(!e)return;let{data:s}=await i.O.from("user_profiles").select("id, preferences").eq("user_id",e.id).single(),t={...(null==s?void 0:s.preferences)||{},mileage_auto_start_speed:u,theme:x,primary_color:p};if(s){let{error:s}=await i.O.from("user_profiles").update({preferences:t}).eq("user_id",e.id);if(s)throw s}else{let{error:s}=await i.O.from("user_profiles").insert({user_id:e.id,preferences:t});if(s)throw s}o("Settings saved successfully!"),setTimeout(()=>o(""),3e3)}catch(e){console.error("Error saving settings:",e),o("Error saving settings. Please try again.")}finally{c(!1)}}return((0,r.useEffect)(()=>{f()},[]),e)?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(n.Z,{}),(0,a.jsx)("main",{className:"max-w-3xl mx-auto px-4 py-8",children:(0,a.jsx)("p",{className:"text-center text-gray-500",children:"Loading settings..."})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(n.Z,{}),(0,a.jsxs)("main",{className:"max-w-3xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Customize your app preferences"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Mileage Tracker Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Auto-Start Speed Threshold"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Mileage tracking will automatically start when your vehicle reaches this speed."}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("input",{type:"range",min:"5",max:"10",step:"1",value:u,onChange:e=>m(parseInt(e.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-[100px]",children:[(0,a.jsx)("input",{type:"number",min:"5",max:"10",value:u,onChange:e=>{let s=parseInt(e.target.value);s>=5&&s<=10&&m(s)},className:"w-16 px-3 py-2 border border-gray-300 rounded-lg text-center"}),(0,a.jsx)("span",{className:"text-gray-700 font-medium",children:"mph"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-2 px-1",children:[(0,a.jsx)("span",{children:"5 mph (More sensitive)"}),(0,a.jsx)("span",{children:"10 mph (Less sensitive)"})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm text-blue-800",children:(0,a.jsxs)("strong",{children:["Current setting: ",u," mph"]})}),(0,a.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"Lower values start tracking sooner (e.g., 5 mph = starts in parking lots). Higher values reduce false starts (e.g., 10 mph = highway driving only)."})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Appearance"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"radio",name:"theme",value:"light",checked:"light"===x,onChange:()=>h("light")}),(0,a.jsx)("span",{children:"Light"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"radio",name:"theme",value:"dark",checked:"dark"===x,onChange:()=>h("dark")}),(0,a.jsx)("span",{children:"Dark"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Color"}),(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:["#3B82F6","#EF4444","#10B981","#8B5CF6","#F97316","#EC4899","#F59E0B","#14B8A6"].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>g(e),className:"w-8 h-8 rounded-full border-2 ".concat(p===e?"border-blue-600":"border-gray-300"),style:{backgroundColor:e},"aria-label":"Select ".concat(e)},e))})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:b,disabled:t,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Saving...":"Save Settings"}),d&&(0,a.jsx)("p",{className:"text-sm font-medium ".concat(d.includes("Error")?"text-red-600":"text-green-600"),children:d})]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(l.default,{href:"/mileage",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"← Back to Mileage Tracker"})})]})]})}},6079:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(7437),r=t(2265),l=t(7138),n=t(6463),i=t(2094);function c(){let e=(0,n.usePathname)(),s=(0,n.useRouter)(),[t,c]=(0,r.useState)(null),[d,o]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1);async function x(){let{data:{user:e}}=await i.O.auth.getUser();c(e)}async function h(){o(!0);try{await i.O.auth.signOut(),c(null),m(!1),s.push("/")}catch(e){console.error("Error signing out:",e)}finally{o(!1)}}(0,r.useEffect)(()=>{x()},[]),(0,r.useEffect)(()=>{m(!1)},[e]);let p=[{href:"/expense-dashboard",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/expenses",label:"Expenses",icon:"\uD83D\uDCCB"},{href:"/budgets",label:"Budgets",icon:"\uD83D\uDCB0"},{href:"/receipts",label:"Receipts",icon:"\uD83E\uDDFE"},{href:"/mileage",label:"Mileage",icon:"\uD83D\uDE97"},{href:"/reports",label:"Reports",icon:"\uD83D\uDCC8"},{href:"/profile",label:"Profile",icon:"\uD83D\uDC64"}];return(0,a.jsx)("nav",{className:"bg-white shadow-sm border-b",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)(l.default,{href:"/expense-dashboard",className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB0"}),(0,a.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"Expenses Made Easy"})]}),(0,a.jsxs)("div",{className:"hidden md:flex items-center gap-1",children:[p.map(s=>(0,a.jsxs)(l.default,{href:s.href,className:"px-4 py-2 rounded-lg text-sm font-medium transition ".concat(e===s.href?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:[(0,a.jsx)("span",{className:"mr-1",children:s.icon}),s.label]},s.href)),t?(0,a.jsxs)("button",{onClick:h,disabled:d,className:"ml-2 px-4 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-100 transition disabled:opacity-50",children:[(0,a.jsx)("span",{className:"mr-1",children:"\uD83D\uDEAA"}),d?"Logging out...":"Logout"]}):(0,a.jsxs)(l.default,{href:"/auth/login",className:"ml-2 px-4 py-2 rounded-lg text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 transition",children:[(0,a.jsx)("span",{className:"mr-1",children:"\uD83D\uDD10"}),"Login"]})]}),(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsx)("button",{onClick:()=>m(!u),className:"p-2 rounded-lg text-gray-700 hover:bg-gray-100","aria-label":"Toggle menu",children:u?"✕":"☰"})})]}),u&&(0,a.jsx)("div",{className:"md:hidden py-4 border-t",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[p.map(s=>(0,a.jsxs)(l.default,{href:s.href,className:"px-4 py-3 rounded-lg text-sm font-medium transition ".concat(e===s.href?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:[(0,a.jsx)("span",{className:"mr-2",children:s.icon}),s.label]},s.href)),(0,a.jsx)("div",{className:"border-t my-2 pt-2",children:t?(0,a.jsxs)("button",{onClick:h,disabled:d,className:"w-full px-4 py-3 rounded-lg text-sm font-medium text-left text-gray-700 hover:bg-gray-100 transition disabled:opacity-50",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDEAA"}),d?"Logging out...":"Logout"]}):(0,a.jsxs)(l.default,{href:"/auth/login",className:"block px-4 py-3 rounded-lg text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 transition text-center",children:[(0,a.jsx)("span",{className:"mr-2",children:"\uD83D\uDD10"}),"Login"]})})]})})]})})}},6463:function(e,s,t){"use strict";var a=t(1169);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},2094:function(e,s,t){"use strict";t.d(s,{O:function(){return a}});let a=(0,t(2835).eI)("https://vckynnyputrvwjhosryl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZja3lubnlwdXRydndqaG9zcnlsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk4NDQ5OTgsImV4cCI6MjA3NTQyMDk5OH0.wpopXA3AtRSKAJdGqtcEtbBJPcpCGfeqm6VC27JkNEI",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"expenses-made-easy-auth"}})}},function(e){e.O(0,[138,835,971,23,744],function(){return e(e.s=6524)}),_N_E=e.O()}]);